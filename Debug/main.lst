STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 1  Assembler
                                               d:\stm8\ac_start\main.asm

   1                         stm8/     
   2                         
   0  000000                                 #include "mapping.inc"
   1                                                          ;-------------------------------
                                                                ;-----------------------
   2                                                          ; SEGMENT MAPPING FILE 
                                                                ;AUTOMATICALLY GENERATED BY 
                                                                ;STVD
   3                                                          ; SHOULD NOT BE MANUALLY 
                                                                ;MODIFIED.
   4                                                          ; CHANGES WILL BE LOST WHEN FILE
                                                                ; IS REGENERATED.
   5                                                          ;-------------------------------
                                                                ;-----------------------
   6  000000                                 #define  RAM0 1
   7  000000                                 #define  ram0_segment_start 0
   8  000000                                 #define  ram0_segment_end FF
   9  000000                                 #define  RAM1 1
  10  000000                                 #define  ram1_segment_start 100
  11  000000                                 #define  ram1_segment_end 1FF
  12  000000                                 #define  stack_segment_start 200
  13  000000                                 #define  stack_segment_end 3FF
<END_OF_INCLUSION>
   0  000000                                 #include "stm8s003f3.inc"
   1                         ;----STM8S003F3 peripherial define file
   2                         ;--Registers of the MCU:
   3                                   
   4                                                          ;---CLK-----
   5  000000                                 #define  CLK_ICKR      $50C0;
   6  000000                                 #define  CLK_ECKR      $50C1;
   7  000000                                 #define  CLK_CMSR      $50C3;
   8  000000                                 #define  CLK_SWR       $50C4;
   9  000000                                 #define  CLK_SWCR      $50C5;
  10  000000                                 #define  CLK_CKDIVR    $50C6;
  11  000000                                 #define  CLK_PCKENR1    $50C7;
  12  000000                                 #define  CLK_CSSR       $50C8;
  13  000000                                 #define  CLK_CCOR       $50C9;
  14  000000                                 #define  CLK_PCKENR2    $50CA;
  15                                   
  16  000000                                 #define  HSERDY        #$02
  17  000000                                 #define  HSEEN         #$01
  18                                   
  19  000000                                 #define  SWIF    #$08 
  20  000000                                 #define  SWIEN         #$04
  21  000000                                 #define  SWEN          #$02
  22  000000                                 #define  SWBSY   #$01
  23                                   
  24  000000                                 #define  HSIDIV_1 #$00
  25  000000                                 #define  HSIDIV_2 #$08
  26  000000                                 #define  HSIDIV_4 #$10
  27  000000                                 #define  HSIDIV_8 #$18
  28                                   
  29  000000                                 #define  CPUDIV_1 #$00
  30  000000                                 #define  CPUDIV_2 #$01
  31  000000                                 #define  CPUDIV_4 #$02
  32  000000                                 #define  CPUDIV_8 #$03
  33  000000                                 #define  CPUDIV_16 #$04
  34  000000                                 #define  CPUDIV_32 #$05
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 2  Assembler
                                               d:\stm8\ac_start\main.asm

  35  000000                                 #define  CPUDIV_64 #$06
  36  000000                                 #define  CPUDIV_128 #$07
  37                                                          ;-------ITC------
  38  000000                                 #define  EXTI_CR1  $50A0  ;
  39  000000                                 #define  EXTI_CR2  $50A1  ;
  40                                                          ;----FLASH-------
  41  000000                                 #define  FLASH_CR1 $505A  ;
  42  000000                                 #define  FLASH_CR2 $505B  ;
  43  000000                                 #define  LASH_NCR2 $505C  ;
  44  000000                                 #define  FLASH_FPR $505D  ;
  45  000000                                 #define  FLASH _NFPR $505E  ; 	
  46  000000                                 #define  _NFPR $505E _IAPSR $505F  ;
  47                                                          ;--------PORT A-----
  48  000000                                 #define  PA_ODR        $5000;
  49  000000                                 #define  PA_IDR        $5001;
  50  000000                                 #define  PA_DDR        $5002;
  51  000000                                 #define  PA_CR1        $5003;
  52  000000                                 #define  PA_CR2  $5004  ;
  53                                                          ;--------PORT B------
  54  000000                                 #define  PB_ODR        $5005;
  55  000000                                 #define  PB_IDR        $5006;
  56  000000                                 #define  PB_DDR        $5007;
  57  000000                                 #define  PB_CR1        $5008;
  58  000000                                 #define  PB_CR2        $5009;
  59                                                          ;---------PORT  C-----
  60  000000                                 #define  PC_ODR        $500A;
  61  000000                                 #define  PC_IDR        $500B;
  62  000000                                 #define  PC_DDR        $500C;
  63  000000                                 #define  PC_CR1        $500D;
  64  000000                                 #define  PC_CR2        $500E;
  65                                   
  66                                                          ;----PORT D-------
  67  000000                                 #define  PD_ODR        $500F;
  68  000000                                 #define  PD_IDR        $5010;
  69  000000                                 #define  PD_DDR        $5011;
  70  000000                                 #define  PD_CR1        $5012;
  71  000000                                 #define  PD_CR2        $5013;
  72                                                          ;--------PORT E-------
  73  000000                                 #define  PE_ODR        $5014;
  74  000000                                 #define  PE_IDR        $5015;
  75  000000                                 #define  PE_DDR        $5016;
  76  000000                                 #define  PE_CR1        $5017;
  77  000000                                 #define  PE_CR2        $5018;
  78                                                          ;---------PORT F------
  79  000000                                 #define  PF_ODR        $5019;
  80  000000                                 #define  PF_IDR        $501A;
  81  000000                                 #define  PF_DDR        $501B;
  82  000000                                 #define  PF_CR1        $501C;
  83  000000                                 #define  PF_CR2        $501D;
  84                                                          ;------ITC---------
  85  000000                                 #define  $50A0 $50A0   ;
  86  000000                                 #define  $50A1 $50A1   ;
  87                                                          ;--------TIM 1----------
  88  000000                                 #define  TIM1_CR1  $5250  ;
  89  000000                                 #define  TIM1_CR2  $5251  ;
  90  000000                                 #define  TIM1_SMCR $5252  ;
  91  000000                                 #define  TIM1_ETR  $5253  ;
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 3  Assembler
                                               d:\stm8\ac_start\main.asm

  92  000000                                 #define  TIM1_IER  $5254  ;
  93  000000                                 #define  TIM1_SR1  $5255  ;
  94  000000                                 #define  TIM1_SR2  $5256  ;
  95  000000                                 #define  TIM1_EGR  $5257  ;
  96  000000                                 #define  TIM1_CCMR1 $5258  ;
  97  000000                                 #define  TIM1_CCMR2 $5259  ;
  98  000000                                 #define  TIM1_CCMR3 $525A  ;
  99  000000                                 #define  TIM1_CCMR4  $525B  ;
 100  000000                                 #define  TIM1_CCER1 $525C  ;
 101  000000                                 #define  TIM1_CCER2 $525D  ;
 102  000000                                 #define  TIM1_CNTRH $525E  ;
 103  000000                                 #define  TIM1_CNTRL  $255f  ;
 104  000000                                 #define  TIM1_PSCRH  $5260  ;
 105  000000                                 #define  TIM1_PSCRL $5261  ;
 106  000000                                 #define  TIM1_ARRH  $5262  ;
 107  000000                                 #define  TIM1_ARRL  $5263  ;
 108  000000                                 #define  TIM1_RCR   $5264  ;
 109  000000                                 #define  TIM1_CCR1H $5265  ;
 110  000000                                 #define  TIM1_CCR1L $5266  ;
 111  000000                                 #define  TIM1_CCR2H $5267  ;
 112  000000                                 #define  TIM1_CCR2L $5268  ;
 113  000000                                 #define  TIM1_CCR3H $5269  ;
 114  000000                                 #define  TIM1_CCR3L $526A  ;
 115  000000                                 #define  TIM1_CCR4H  $526B  ;
 116  000000                                 #define  TIM1_CCR4L $526C  ;
 117  000000                                 #define  TIM1_BKR   $526D  ;
 118  000000                                 #define  TIM1_DTR   $526E  ;
 119  000000                                 #define  TIM1_OISR  $526F  ;
 120                                   
 121  000000                                 #define  TIM_CR1_CENTER_ALINGN_1 #$20
 122  000000                                 #define  TIM_CR1_CENTER_ALINGN_2 #$40
 123  000000                                 #define  TIM_CR1_CENTER_ALINGN_3 #$60
 124  000000                                 #define  TIM_CR1_COUNTS_UP #$00
 125  000000                                 #define  TIM_CR1_COUNTS_DOWN #$10
 126  000000                                 #define  TIM_CR1_PRELOAD #$80
 127  000000                                 #define  TIM_CCMR_ACTIVE_ON_MATCH #$10
 128  000000                                 #define  TIM_CCMR_INACTIVE_ON_MATCH #$20
 129  000000                                 #define  TIM_CCMR_TOGGLE   #$30
 130  000000                                 #define  TIM_CCMR_FORCE_INACTIVE #$40 
 131  000000                                 #define  TIM_CCMR_FORCE_ACTIVE   #$50
 132                                                          ;-------------SPI----------
 133  000000                                 #define  SPI_CR1  $5200  ;
 134  000000                                 #define  SPI_CR2 $5201  ;
 135  000000                                 #define  SPI_ICR  $5202  ;
 136  000000                                 #define  SPI_SR        $5203;
 137  000000                                 #define  SPI_DR        $5204;
 138  000000                                 #define  SPI_CRCPR     $5205;
 139  000000                                 #define  SPI_RXCRCR    $5206;
 140  000000                                 #define  SPI_TXCRCR    $5207;
 141                                                          ;---------------I2C----------
 142  000000                                 #define  I2C_CR1       $5210;
 143  000000                                 #define  I2C_CR2       $5211;
 144  000000                                 #define  I2C_FREQR     $5212;
 145  000000                                 #define  I2C_OARL      $5213;
 146  000000                                 #define  I2C_OARH      $5214;
 147  000000                                 #define  I2C_DR        $5216;
 148  000000                                 #define  I2C_SR1       $5217;
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 4  Assembler
                                               d:\stm8\ac_start\main.asm

 149  000000                                 #define  I2C_SR2       $5218;
 150  000000                                 #define  I2C_SR3       $5219;
 151  000000                                 #define  I2C_ITR       $521A;
 152  000000                                 #define  I2C_CCRL      $521B;
 153  000000                                 #define  I2C_CCRH      $521C;
 154  000000                                 #define  I2C_TRISER    $521D;
 155  000000                                 #define  I2C_PECR      $521E;
 156                                                          ;------------UART--------------
 157  000000                                 #define  UART1_SR      $5230;
 158  000000                                 #define  UART1_DR      $5231;
 159  000000                                 #define  UART1_BRR1    $5232;
 160  000000                                 #define  UART1_BRR2    $5233;
 161  000000                                 #define  UART1_CR1     $5234;
 162  000000                                 #define  UART1_CR2     $5235;
 163  000000                                 #define  UART1_CR3     $5236;
 164  000000                                 #define  UART1_CR4     $5237;
 165  000000                                 #define  UART1_CR5     $5238;
 166  000000                                 #define  UART1_GTR     $5239;
 167  000000                                 #define  UART1_PSCR    $523A;
 168                                                          ;----------TIM4----------------
 169  000000                                 #define  TIM4_CR1      $5340;
 170  000000                                 #define  TIM4_IER      $5343;
 171  000000                                 #define  TIM4_SR       $5344;
 172  000000                                 #define  TIM4_EGR      $5345;
 173  000000                                 #define  TIM4_CNTR     $5346;
 174  000000                                 #define  TIM4_PSCR     $5347;
 175  000000                                 #define  TIM4_ARR      $5348;
 176                                                          ;---------ADC1-----------------
 177                                   
 178  000000                                 #define  ADC_CSR       $5400;
 179  000000                                 #define  ADC_CR1       $5401;
 180  000000                                 #define  ADC_CR2       $5402;
 181  000000                                 #define  ADC_CR3       $5403;
 182  000000                                 #define  ADC_DRH       $5404;
 183  000000                                 #define  ADC_DRL       $5405;
 184  000000                                 #define  ADC_TDRH      $5406;
 185  000000                                 #define  ADC_TDRL      $5407;
 186  000000                                 #define  ADC_HTRH      $5408;
 187  000000                                 #define  ADC_HTRL      $5409;
 188  000000                                 #define  ADC_LTRH      $540A;
 189  000000                                 #define  ADC_LTRL      $540B;
 190  000000                                 #define  ADC_AWSRH     $540C;
 191  000000                                 #define  ADC_AWSRL     $540D;
 192  000000                                 #define  ADC_AWCRH     $540E;
 193  000000                                 #define  ADC_AWCRL     $540F;
 194                                                          ;;buffers
 195  000000                                 #define  ADC_DB0RH     $53E0;
 196  000000                                 #define  ADC_DB0RL     $53E1;
 197  000000                                 #define  ADC_DB1RH     $53E2;
 198  000000                                 #define  ADC_DB1RL     $53E3;
 199  000000                                 #define  ADC_DB2RH     $53E4;
 200  000000                                 #define  ADC_DB2RL     $53E5;
 201  000000                                 #define  ADC_DB3RH     $53E6;
 202  000000                                 #define  ADC_DB3RL     $53E7;
 203  000000                                 #define  ADC_DB4RH     $53E8;
 204  000000                                 #define  ADC_DB4RL     $53E9;
 205  000000                                 #define  ADC_DB5RH     $53EA;
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 5  Assembler
                                               d:\stm8\ac_start\main.asm

 206  000000                                 #define  ADC_DB5RL     $53EB;
 207  000000                                 #define  ADC_DB6RH     $53EC;
 208  000000                                 #define  ADC_DB6RL     $53ED;
 209  000000                                 #define  ADC_DB7RH     $53EC;
 210  000000                                 #define  ADC_DB7RL     $53ED;
 211  000000                                 #define  ADC_DB8RH     $53EC;
 212  000000                                 #define  ADC_DB8RL     $53ED;
 213                                   
 214                                   
 215                                                          ;----------TIM2----------
 216  000000                                 #define  TIM2_CR1      $5300;
 217  000000                                 #define  TIM2_IER      $5303;
 218  000000                                 #define  TIM2_SR1      $5304;
 219  000000                                 #define  TIM2_SR2      $5305;
 220  000000                                 #define  TIM2_EGR      $5306;
 221  000000                                 #define  TIM2_CCMR1    $5307;
 222  000000                                 #define  TIM2_CCMR2    $5308;
 223  000000                                 #define  TIM2_CCMR3    $5309;
 224  000000                                 #define  TIM2_CCER1    $530A;
 225  000000                                 #define  TIM2_CCER2    $530B;
 226  000000                                 #define  TIM2_CNTRH    $530C;
 227  000000                                 #define  TIM2_CNTRL  $530D  ;
 228  000000                                 #define  TIM2_PSCR     $530E;
 229  000000                                 #define  TIM2_ARRH     $530F;
 230  000000                                 #define  TIM2_ARRL     $5310;
 231  000000                                 #define  TIM2_CCR1H    $5311;
 232  000000                                 #define  TIM2_CCR1L    $5312;
 233  000000                                 #define  TIM2_CCR2H      $5313  ;
 234  000000                                 #define  TIM2_CCR2L    $5314;
 235  000000                                 #define  TIM2_CCR3H    $5315;
 236  000000                                 #define  TIM2_CCR3L    $5316;
 237                                   
 238                                   
<END_OF_INCLUSION>
   5                                   
   6                                                          ;--!!--SYSTEM CLOCK = 5MHz-----
   7                                                          ;please re-write it for case 
                                                                ;without crystal
   8  000000                                 #define  MIN_DURATION #$000A
   9                                   
  10                                   segment  byte at 0000-200 'user_ram'
  11                                   
  12  000000                       u16test   EQU      $0000
  13  000002                       u16delayDuration  EQU      $0002
  14  000004                       _semaphore  EQU      $0004
  15                         
  16                                   segment  'rom'
  17                         main.l    
  18                                                          ; initialize SP
  19  008080   AE03FF                        ldw      X,#stack_end
  20  008083   94                            ldw      SP,X
  21                                   
  22  008084                                 #ifdef   1             
  23                                                          ; clear RAM0
  24  000000                       ram0_start.b  EQU      $0
  25  0000FF                       ram0_end.b  EQU      $FF
  26  008084   AE0000                        ldw      X,#ram0_start
  27                         clear_ram0.l  
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 6  Assembler
                                               d:\stm8\ac_start\main.asm

  28  008087   7F                            clr      (X)
  29  008088   5C                            incw     X
  30  008089   A300FF                        cpw      X,#ram0_end   
  31  00808C   23F9                          jrule    clear_ram0
  32  00808E                                 #endif   
  33                         
  34  00808E                                 #ifdef   1
  35                                                          ; clear RAM1
  36  000100                       ram1_start.w  EQU      $100
  37  0001FF                       ram1_end.w  EQU      $1FF          
  38  00808E   AE0100                        ldw      X,#ram1_start
  39                         clear_ram1.l  
  40  008091   7F                            clr      (X)
  41  008092   5C                            incw     X
  42  008093   A301FF                        cpw      X,#ram1_end   
  43  008096   23F9                          jrule    clear_ram1
  44  008098                                 #endif   
  45                         
  46                                                          ; clear stack
  47  000200                       stack_start.w  EQU      $200
  48  0003FF                       stack_end.w  EQU      $3FF
  49  008098   AE0200                        ldw      X,#stack_start
  50                         clear_stack.l  
  51  00809B   7F                            clr      (X)
  52  00809C   5C                            incw     X
  53  00809D   A303FF                        cpw      X,#stack_end  
  54  0080A0   23F9                          jrule    clear_stack
  55                         
  56                         
  57                         ;                                      _      
  58                         ;  _   _ ___  ___ _ __    ___ ___   __| | ___ 
  59                         ; | | | / __|/ _ \ '__|  / __/ _ \ / _` |/ _ \
  60                         ; | |_| \__ \  __/ |    | (_| (_) | (_| |  __/
  61                         ;  \__,_|___/\___|_|     \___\___/ \__,_|\___|
  62                         
  63                                                          ;--init-clock-------------
  64                                                          ;;EXTERNAL interrupt registers 
                                                                ;must be set before any 
                                                                ;interrupts!
  65                                                          ; $0-fall and LOW, $1-rise, 
                                                                ;$2-fall, $3-rise & fall
  66  0080A2   721050A0                      BSET     $50A0 , #0    ;PAIS 0
  67  0080A6   721250A0                      BSET     $50A0 , #1    ;PAIS 1
  68                                   
  69  0080AA   A600                          LD       A, #00
  70  0080AC   88                            PUSH     A
  71  0080AD   CD8199                        CALL     clkSetHsiDivider
  72  0080B0   5B01                          ADDW     SP, #1
  73  0080B2   A600                          LD       A, #0
  74  0080B4   88                            PUSH     A
  75  0080B5   CD81BB                        CALL     clkSetCpuDivider
  76  0080B8   5B01                          ADDW     SP, #1
  77  0080BA   CD81A6                        CALL     clkSwitchToCrystal
  78                                                          ;----------------------
  79                                   
  80                         ;peripherial ON
  81  0080BD   A68F                          LD       A, #$8f
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 7  Assembler
                                               d:\stm8\ac_start\main.asm

  82  0080BF   88                            PUSH     A
  83  0080C0   CD8191                        CALL     clkBusPeripherial1
  84  0080C3   5B01                          ADDW     SP,#1
  85                                                          ;---init global variables: TIM1 
                                                                ;period
  86  0080C5   AE0180                        LDW      X, #$0180
  87  0080C8   BF02                          LDW      u16delayDuration, X
  88  0080CA   BF00                          LDW      u16test, X
  89                         ;PC3-TIM1 CH3
  90  0080CC   7216500C                      BSET     $500C, #$3    ;output
  91  0080D0   7216500D                      BSET     $500D, #$3    ; push-pull
  92  0080D4   72185011                      BSET     $5011, #4     ;PD4 - out
  93  0080D8   72185012                      BSET     $5012, #4     ;push-pull
  94                         ;--PORTB EXTERN INTERRRUPT SET
  95  0080DC   72165003                      BSET     $5003, #$3    ;pull-up resistor
  96                                   
  97                                                          ;==PROCEDURE==uart1ReceiverSetup
                                                                ;
  98  0080E0   AE0209                        LDW      X, #$209      ;@baudRate16, divider
  99  0080E3   89                            PUSHW    X
 100  0080E4   A600                          LD       A, #0         ;@dataLength8, $10->9bits (1stop
                                                                ; 1 start) , $00->8bits
 101  0080E6   88                            PUSH     A        
 102  0080E7   A600                          LD       A, #0         ;@stopBits8, active only when 8 
                                                                ;bits: $00->1bit,      
                                                                ;$20->2bits
 103  0080E9   88                            PUSH     A  
 104  0080EA   A600                          LD       A, #0         ;@parity8, $00-disable, 
                                                                ;$04-enable: ($02-odd OR 
                                                                ;$00-even)
 105  0080EC   88                            PUSH     A
 106  0080ED   CD81C8                        CALL     uart1ReceiverSetup
 107  0080F0   5B05                          ADDW     SP, #5        ;SP +5
 108                                                          ;===PROCEDURE 
                                                                ;'tim1OnePulsePwmCh3Setup'
 109                                                          ;timer is stopped!To start, call
                                                                ; - 'tim1OnePulseModeStart'
 110  0080F2   AE0062                        LDW      X, #$0062     ;@presc16,  $62=98, 5M/98=51KHz
 111  0080F5   89                            PUSHW    x
 112  0080F6   AE0120                        LDW      X, #$0120     ;@base16, -> 255 is base of 
                                                                ;counter $ff->100Hz period
 113  0080F9   89                            PUSHW    X
 114  0080FA   AE011F                        LDW      X, #$011f     ;@comp16, ->  pulse width, CCR1 
                                                                ;content
 115  0080FD   89                            PUSHW    X
 116  0080FE   A668                          LD       A, #$68       ;@mode8,  -> (CCMR) : $60 
                                                                ;PWM_MODE1, $08 preload en.
 117  008100   88                            PUSH     A
 118  008101   A682                          LD       A, #$82       ;@polarity8 -> (CCER)  $00 
                                                                ;active HI,$02 active low
 119  008103   88                            PUSH     A
 120  008104   A680                          LD       A, #$80       ;@preload8  ->  $80 preload 
                                                                ;enable, CR1 content
 121  008106   88                            PUSH     A
 122  008107   CD8144                        CALL     tim1OnePulsePwmCh3Setup
 123  00810A   5B09                          ADDW     SP, #$09
 124                         
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 8  Assembler
                                               d:\stm8\ac_start\main.asm

 125                                                          ;;---set up PORTA pin for 
                                                                ;interrupt enable
 126  00810C   72165004                      BSET     $5004, #$3    ;external interrupt PA3 turn on
 127                                   
 128                         infinite_loop.l  
 129                         ;  _                   
 130                         ; | | ___   ___  _ __  
 131                         ; | |/ _ \ / _ \| '_ \ 
 132                         ; | | (_) | (_) | |_) |
 133                         ; |_|\___/ \___/| .__/ 
 134                         ;               |_|    
 135  008110   9D                            NOP      
 136  008111   8F                            WFI      
 137  008112   20FC                          jra      infinite_loop
 138                         ;	 _ _ _     
 139                         ; | (_) |__  
 140                         ; | | | '_ \ 
 141                         ; | | | |_) |
 142                         ; |_|_|_.__/ 
 143                                   
 144                         ;-----L I B--
 145                         ;-----FUNCTION
 146                         hexToNibble  
 147                         ;@character8
 148                         ;SP+1
 149                         ;-0  1    4
 150                         ;[|A|RET|character]
 151  008114                                 #define  h01_char ($4,SP)
 152  008114   88                            PUSH     A
 153  008115   7B04                          LD       A, ($4,SP)
 154  008117   A030                          SUB      A, #$30
 155  008119   2F22                          JRSLT    _hxn_end_pr
 156  00811B   7B04                          LD       A, ($4,SP)
 157  00811D   A03A                          SUB      A, #$3A
 158  00811F   2C08                          JRSGT    _letters_hex_
 159                                                          ;from 0 to 9
 160  008121   7B04                          LD       A, ($4,SP)
 161  008123   A030                          SUB      A, #$30
 162  008125   6B04                          LD       ($4,SP), A
 163  008127   84                            POP      A
 164  008128   81                            RET      
 165                         _letters_hex_  
 166  008129   7B04                          LD       A, ($4,SP)
 167  00812B   A041                          SUB      A, #$41
 168  00812D   2F0E                          JRSLT    _hxn_end_pr
 169  00812F   7B04                          LD       A, ($4,SP)
 170  008131   A047                          SUB      A, #$47
 171  008133   2C08                          JRSGT    _hxn_end_pr 
 172                                                          ;from A to F
 173  008135   7B04                          LD       A, ($4,SP)
 174  008137   A037                          SUB      A, #$37
 175  008139   6B04                          LD       ($4,SP), A
 176  00813B   84                            POP      A
 177  00813C   81                            RET      
 178                         _hxn_end_pr  
 179  00813D   A602                          LD       A, #2
 180  00813F   40                            NEG      A
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 9  Assembler
                                               d:\stm8\ac_start\main.asm

 181  008140   6B04                          LD       ($4,SP), A
 182  008142   84                            POP      A
 183  008143   81                            RET      
 184                                                          ;===PROCEDURE 
                                                                ;'tim1OnePulsePwmCh3Setup'
 185                                                          ;timer is stopped!To start, call
                                                                ; - 'tim1OnePulseModeStart'
 186                                                          ;@presc16,  
 187                                                          ;@base16, -> base of counter, 
                                                                ;ARRL
 188                                                          ;@comp16, ->  pulse width, CCR1 
                                                                ;content
 189                                                          ;@mode8,  -> (CCMR) : $60 
                                                                ;PWM_MODE1
 190                                                          ;$70 iPWM_MODE2
 191                                                          ;additional:  $04 fast, $08 
                                                                ;preload en.
 192                                                          ;@polarity8 -> (CCER)  $00 
                                                                ;active HI,$02 active low
 193                                                          ;@preload8  ->  $80 preload 
                                                                ;enable, CR1 content
 194                                                          ;after return: SP+9
 195                                                          ;stack frame:
 196                                                          ;[v8a|A|return|prel|pol|mode|com
                                                                ;p|base|presc]
 197                         tim1OnePulsePwmCh3Setup  
 198  008144   88                            PUSH     A
 199                                                          ;--allocate memory
 200  008145   5201                          SUBW     SP , #$01
 201                                                          ;-variables
 202  008147                                 #define  _012_v8a $00
 203  008147                                 #define  _012_prel $05
 204  008147                                 #define  _012_pol $06
 205  008147                                 #define  _012_mode $07
 206  008147                                 #define  _012_compH $08
 207  008147                                 #define  _012_compL $09
 208  008147                                 #define  _012_baseH $0A
 209  008147                                 #define  _012_baseL $0B
 210  008147                                 #define  _012_prescH $0C
 211  008147                                 #define  _012_prescL $0D
 212                                                          ;--disable timer
 213  008147   72115250                      BRES     $5250, #$00
 214                                                          ;--load comparand, Hi firstly
 215  00814B   7B08                          LD       A, ($08,SP)
 216  00814D   C75269                        LD       $5269, A
 217  008150   7B09                          LD       A, ($09,SP)
 218  008152   C7526A                        LD       $526A, A
 219                                                          ;--prescaler high byte firstly
 220  008155   7B0C                          LD       A, ($0C,SP)
 221  008157   C75260                        LD       $5260, A      
 222  00815A   7B0D                          LD       A, ($0D,SP)
 223  00815C   C75261                        LD       $5261, A
 224                                                          ;--load base, high byte first
 225  00815F   7B0A                          LD       A, ($0A,SP)
 226  008161   C75262                        LD       $5262, A
 227  008164   7B0B                          LD       A, ($0B,SP)
 228  008166   C75263                        LD       $5263, A
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 10  Assembler
                                               d:\stm8\ac_start\main.asm

 229                                                          ;--load CCMR1
 230  008169   7B07                          LD       A, ($07,SP)
 231  00816B   C7525A                        LD       $525A, A
 232                                                          ;--polarity
 233                                                          ; 1)store content of another 
                                                                ;channels
 234  00816E   C6525D                        LD       A, $525D
 235  008171   A4F0                          AND      A, #$F0
 236  008173   6B00                          LD       ($00,SP), A   ; store
 237                                                          ;--2)load data for loading in 
                                                                ;register
 238  008175   7B06                          LD       A, ($06,SP)
 239  008177   AA01                          OR       A, #$01       ; turn on channel 
 240                                                          ;--3)apply another regs
 241  008179   1A00                          OR       A, ($00,SP)
 242  00817B   C7525D                        LD       $525D, A
 243                                                          ;--turn on main channels
 244  00817E   721E526D                      BSET     $526D, #$07   ; MOE bit
 245                                                          ;--CR1
 246  008182   7B05                          LD       A, ($05,SP)
 247  008184   C75250                        LD       $5250, A
 248  008187   72165250                      BSET     $5250, #$03   ;//one pulse mode ,stopped
 249  00818B   9D                            NOP      
 250                                                          ;--free memory
 251  00818C   5B01                          ADDW     SP, #$01
 252  00818E   9D                            NOP      
 253  00818F   84                            POP      A
 254  008190   81                            RET      
 255                                   
 256                                                          ;====P R O C E D U R E===turn on
                                                                ; clk bus
 257                                                          ;@peripherial8
 258                                                          ;TIM1-$80,TIM3-$40,TIM2/5-$20,TI
                                                                ;M4/6-$10,UART-see datasheet,
 259                                                          ;SPI-$2,I2C-1
 260                                                          ;STACK after return +1
 261                         clkBusPeripherial1  
 262  008191   88                            PUSH     A
 263  008192   7B04                          LD       A, ($04,SP)
 264  008194   C750C7                        LD       $50C7, A
 265  008197   84                            POP      A
 266  008198   81                            RET      
 267                                                          ;==P R O C E D U R E=="set HSI 
                                                                ;divider"
 268                                                          ;--@ char divider
 269                                                          ;STACK after return +1
 270                         clkSetHsiDivider  
 271                                                          ;--store registers A,X,Y,CC 
                                                                ;(1+2+2+1=6Bytes)
 272  008199   88                            PUSH     A
 273                                                          ;-read default value 
 274  00819A   C650C6                        LD       A, $50C6
 275                                                          ;---clear all the hsi divider 
                                                                ;bits
 276  00819D   A4E7                          AND      A, #$E7
 277                                                          ;--1st paprameter has offset 9 
                                                                ;bytes
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 11  Assembler
                                               d:\stm8\ac_start\main.asm

 278                                                          ; because A,X,Y,CC,SP has ben 
                                                                ;stored later 
 279  00819F   1A04                          OR       A, ($04,SP)
 280                                                          ;---update CLK_CKDIVR
 281  0081A1   C750C6                        LD       $50C6, A
 282                                                          ;--restore registers
 283  0081A4   84                            POP      A
 284  0081A5   81                            RET      
 285                                                          ;===P R O C E D U R E=switch to 
                                                                ;Crystal
 286                                                          ;--NO PARAMS, using interrupts 
                                                                ;(irq 2)
 287                                                          ;STACK after return 0
 288                         clkSwitchToCrystal  
 289  0081A6   88                            PUSH     A
 290                                                          ;---Enable the switching 
                                                                ;mechanism
 291  0081A7   721250C5                      BSET     $50C5, #1     ;SWEN
 292  0081AB   721450C5                      BSET     $50C5, #2     ; SWIEN enable interrupt
 293                                                          ;---select source clock
 294                                                          ;0xE1: HSI selected as master 
                                                                ;clock source (reset value)
 295                                                          ;0xD2: LSI selected as master 
                                                                ;clock source (only if LSI_EN
 296                                                          ;option bit is set)
 297                                                          ;OUR CASE = 0xB4: HSE selected 
                                                                ;as master clock source
 298  0081AF   A6B4                          LD       A, #$B4
 299  0081B1   C750C4                        LD       $50C4, A
 300                                                          ;waiting until clock system does
                                                                ; 
 301                                                          ; switching process 
                                                                ;automatically
 302  0081B4   9D                            NOP      
 303  0081B5   9D                            NOP      
 304  0081B6   9D                            NOP      
 305  0081B7   9D                            NOP      
 306                                                          ;waiting until the HSI be ready
 307  0081B8   8F                            WFI      
 308                                                          ;!clear SWIF flag in the 
                                                                ;interrupt service routine
 309  0081B9   84                            POP      A
 310  0081BA   81                            RET      
 311                                                          ;======P R O C E D U R E==="set 
                                                                ;CPU divider"
 312                                                          ;@ char divider 
 313                                                          ;STACK after return +1
 314                         clkSetCpuDivider  
 315                                                          ;--store registers A,X,Y,CC 
                                                                ;(1+2+2+1=6Bytes)
 316  0081BB   88                            PUSH     A
 317                                                          ;-read default value 
 318  0081BC   C650C6                        LD       A, $50C6
 319                                                          ;---clear all the hsi divider 
                                                                ;bits
 320  0081BF   A4F8                          AND      A, #$f8
 321                                                          ;--1st paprameter has offset 9 
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 12  Assembler
                                               d:\stm8\ac_start\main.asm

                                                                ;bytes
 322                                                          ; because A,X,Y,CC,SP has ben 
                                                                ;stored later
 323  0081C1   1A04                          OR       A, ($04,SP)
 324                                                          ;---update CLK_CKDIVR
 325  0081C3   C750C6                        LD       $50C6, A
 326                                                          ;--restore registers
 327  0081C6   84                            POP      A
 328  0081C7   81                            RET      
 329                                                          ;==PROCEDURE==uart1ReceiverSetup
                                                                ;
 330                         ;@baudRate16, divider
 331                         ;@dataLength8, $10->9bits (1stop 1 start) , $00->8bits
 332                                                          ;(set  manually below)
 333                         ;@stopBits8, active only when 8 bits: $00->1bit, $20->2bits
 334                         ;@parity8, $00-disable, $04-enable: ($02-odd OR $00-even)
 335                         ;-----------
 336                         ;SP +5
 337                         ;  0  1 2 4    5         6      7      8 
 338                         ;[v8a|A|RET|stopBits|dataLength|baudRate]
 339                         
 340                         uart1ReceiverSetup  
 341                                                          ;--store A
 342  0081C8   88                            PUSH     A
 343                                                          ;--allocate 1 byte
 344  0081C9   5201                          SUBW     SP, #$01
 345  0081CB                                 #define  _U1000_v8a $00 
 346  0081CB                                 #define  _U1000_parity $05
 347  0081CB                                 #define  _U1000_stopBits $06 
 348  0081CB                                 #define  _U1000_dataLength $07
 349  0081CB                                 #define  _U1000_baudRateH $08
 350  0081CB                                 #define  _U1000_baudRateL $09
 351                                                          ;--disable Rx, Tx
 352  0081CB   72155235                      BRES     $5235, #$2    ; REN flag
 353  0081CF   72175235                      BRES     $5235, #$3    ; TEN flag
 354                                                          ;--when the length 9 bits-jump 
                                                                ;below
 355  0081D3   A610                          LD       A, #$10
 356  0081D5   1407                          AND      A, ($07,SP)
 357  0081D7   2605                          JRNE     L_U1000_nsb   ;when 9 bits-go to label
 358                                                          ;--when 8 bit set stop bits
 359  0081D9   7B06                          LD       A, ($06,SP)
 360  0081DB   C75236                        LD       $5236, A
 361                         L_U1000_nsb  
 362                                                          ;--write data length and parity
 363  0081DE   7B07                          LD       A,($07,SP)
 364  0081E0   1A05                          OR       A, ($05,SP)
 365  0081E2   C75234                        LD       $5234, A
 366                                                          ;prepare UART1_BRR2
 367                                                          ;n4 n1
 368  0081E5   7B09                          LD       A, ($09,SP)
 369  0081E7   A40F                          AND      A, #$0F       ;
 370  0081E9   6B00                          LD       ( $00,SP),A   ; store nibble 1
 371  0081EB   7B08                          LD       A, ($08,SP)
 372  0081ED   A4F0                          AND      A, #$f0       ; nibble 4
 373  0081EF   1A00                          OR       A, ($00,SP)   ; n4+n1
 374  0081F1   6B00                          LD       ( $00,SP),A   ; store BRR2 [n4,n1]
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 13  Assembler
                                               d:\stm8\ac_start\main.asm

 375                                                          ;;--send -TO REGISTER BRR2
 376  0081F3   C75233                        LD       $5233 , A
 377                                                          ;----n3 n2
 378  0081F6   7B08                          LD       A, ($08,SP)
 379  0081F8   4E                            SWAP     A
 380  0081F9   A4F0                          AND      A, #$F0
 381  0081FB   6B00                          LD       ( $00,SP),A   ; store n3
 382  0081FD   7B09                          LD       A, ($09,SP)
 383  0081FF   4E                            SWAP     A
 384  008200   A40F                          AND      A, #$0f
 385  008202   1A00                          OR       A, ( $00,SP)
 386                                                          ;--send to register BRR1
 387  008204   C75232                        LD       $5232, A
 388                                                          ; RIEN interrupt on receive
 389  008207   721A5235                      BSET     $5235, #$5 
 390                                                          ;--setting REN bit "Receiver 
                                                                ;enable"
 391  00820B   72145235                      BSET     $5235 , #$2
 392                                                          ;--restore stack
 393  00820F   5B01                          ADDW     SP, #$01
 394  008211   84                            POP      A
 395  008212   81                            RET      
 396                         ;  ___ ____  ____  
 397                         ; |_ _/ ___||  _ \ 
 398                         ;  | |\___ \| |_) |
 399                         ;  | | ___) |  _ < 
 400                         ; |___|____/|_| \_\
 401                         
 402                         ;clock--Interrupt---Service----Routine
 403                         clockISR  
 404  008213   721750C5                      BRES     $50C5, #3     ; clear SWIF (in the ISR)
 405  008217   80                            IRET     
 406                         ;---PORT A Interrupt service routine (Zero Cross Detection)
 407                         portA_ISR  
 408  008218   7208501007                    BTJT     $5010, #4, led_tst_off
 409  00821D   7218500F                      BSET     $500F, #4
 410  008221   CC8228                        JP       pa_isr_end
 411                         led_tst_off  
 412  008224   7219500F                      BRES     $500F, #4
 413                         pa_isr_end  
 414  008228   BE02                          LDW      X, u16delayDuration
 415  00822A   5D                            TNZW     X
 416  00822B   2715                          JREQ     _empty_t1
 417  00822D   9E                            LD       A, XH
 418  00822E   C75262                        LD       $5262, A
 419  008231   9F                            LD       A, XL
 420  008232   C75263                        LD       $5263, A
 421  008235   5A                            DECW     X
 422  008236   9E                            LD       A, XH
 423  008237   C75269                        LD       $5269, A
 424  00823A   9F                            LD       A, XL
 425  00823B   C7526A                        LD       $526A, A
 426  00823E   72105250                      BSET     $5250, #0
 427                         _empty_t1  
 428                                   
 429  008242   80                            IRET     
 430                                   
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 14  Assembler
                                               d:\stm8\ac_start\main.asm

 431                                                          ;-UART interrupt service 
                                                                ;routine
 432                         uartRxISR  
 433  008243   5201                          SUBW     SP, #1 
 434  008245   C65231                        LD       A, $5231
 435  008248   88                            PUSH     A
 436  008249   CD8114                        CALL     hexToNibble
 437  00824C   84                            POP      A
 438  00824D   2B57                          JRMI     _end_rx       ;exit when symbol non-hex
 439  00824F   720600040C                    BTJT     _semaphore, #3, _rx_4_nibble
 440                                                          ;nib 4 
 441  008254   5F                            CLRW     X
 442  008255   4E                            SWAP     A
 443  008256   95                            LD       XH, A
 444  008257   BF00                          LDW      u16test, X
 445  008259   72160004                      BSET     _semaphore, #3
 446  00825D   CC82A6                        JP       _end_rx
 447                         _rx_4_nibble  
 448  008260   7204000412                    BTJT     _semaphore, #2, _rx_3_nibble
 449                                                          ;nib 3
 450  008265   5F                            CLRW     X
 451  008266   BE00                          LDW      X, u16test
 452  008268   6B00                          LD       ($0,SP), A    ;store as local var
 453  00826A   9E                            LD       A, XH         ;high byte
 454  00826B   1A00                          OR       A, ($0,SP) 
 455  00826D   95                            LD       XH, A
 456  00826E   BF00                          LDW      u16test, X
 457  008270   72140004                      BSET     _semaphore, #2
 458  008274   CC82A6                        JP       _end_rx
 459                         _rx_3_nibble  
 460  008277   720200040E                    BTJT     _semaphore, #1, _rx_2_nibble
 461                                                          ;nib 2
 462  00827C   5F                            CLRW     X
 463  00827D   4E                            SWAP     A
 464  00827E   BE00                          LDW      X, u16test
 465  008280   97                            LD       XL, A
 466  008281   BF00                          LDW      u16test, X
 467  008283   72120004                      BSET     _semaphore, #1
 468  008287   CC82A6                        JP       _end_rx
 469                         _rx_2_nibble  
 470  00828A   7200000417                    BTJT     _semaphore, #0, _rx_1_nibble
 471                                                          ;nib 1
 472  00828F   5F                            CLRW     X
 473  008290   BE00                          LDW      X, u16test
 474  008292   6B00                          LD       ($0,SP), A    ;store as local var
 475  008294   9F                            LD       A, XL         ;low byte
 476  008295   1A00                          OR       A, ($0,SP) 
 477  008297   97                            LD       XL, A
 478  008298   BF00                          LDW      u16test, X
 479  00829A   A6F0                          LD       A, #$F0
 480  00829C   B404                          AND      A, _semaphore   ;clear semaphore
 481  00829E   B704                          LD       _semaphore, A
 482  0082A0   90BE00                        LDW      Y, u16test    ;copy word
 483  0082A3   90BF02                        LDW      u16delayDuration, Y   ; 
 484                         _rx_1_nibble  
 485                         
 486                         _end_rx   
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 15  Assembler
                                               d:\stm8\ac_start\main.asm

 487  0082A6   5B01                          ADDW     SP, #1 
 488  0082A8   80                            IRET     
 489                                   
 490  0082A9                                 interrupt NonHandledInterrupt
 491                         NonHandledInterrupt.l  
 492  0082A9   80                            iret     
 493                         
 494                                   segment  'vectit'
 495  008000   82008080                      dc.l     {$82000000+main}  ; reset
 496  008004   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; trap
 497  008008   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq0
 498  00800C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq1
 499  008010   82008213                      dc.l     {$82000000+clockISR}  ; irq2
 500  008014   82008218                      dc.l     {$82000000+portA_ISR}  ; irq3
 501  008018   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq4
 502  00801C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq5
 503  008020   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq6
 504  008024   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq7
 505  008028   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq8
 506  00802C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq9
 507  008030   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq10
 508  008034   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq11
 509  008038   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq12
 510  00803C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq13
 511  008040   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq14
 512  008044   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq15
 513  008048   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq16
 514  00804C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq17
 515  008050   82008243                      dc.l     {$82000000+uartRxISR}  ; irq18
 516  008054   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq19
 517  008058   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq20
 518  00805C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq21
 519  008060   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq22
 520  008064   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq23
 521  008068   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq24
 522  00806C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq25
 523  008070   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq26
 524  008074   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq27
 525  008078   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq28
 526  00807C   820082A9                      dc.l     {$82000000+NonHandledInterrupt}  ; irq29
 527                         
 528  008080                                 end      
STMicroelectronics list file postprocessor v1.01   (C)2009-2024   Wed Sep 25 21:11:17 2024
Page 16  Assembler
                                               d:\stm8\ac_start\main.asm

Symbol Name                       Value     Call       Type  Scope      Rel.  Line  Privacy  Segment   Size  Bytes File

L_U1000_nsb                           81DE         no  WORD  Internal   ABS    361  private  text        53     0  -

NonHandledInterrupt               000082A9  interrupt  LONG  Internal   ABS    491  private  text         1     0  -

_semaphore                            0004         no  WORD  Internal   ABS     14  private  undef        0     0  -
_letters_hex_                         8129         no  WORD  Internal   ABS    165  private  text        20     0  -
_hxn_end_pr                           813D         no  WORD  Internal   ABS    178  private  text         7     0  -
_empty_t1                             8242         no  WORD  Internal   ABS    427  private  text         1     0  -
_rx_4_nibble                          8260         no  WORD  Internal   ABS    447  private  text        23     0  -
_rx_3_nibble                          8277         no  WORD  Internal   ABS    459  private  text        19     0  -
_rx_2_nibble                          828A         no  WORD  Internal   ABS    469  private  text        28     0  -
_rx_1_nibble                          82A6         no  WORD  Internal   ABS    484  private  text         3     0  -
_end_rx                               82A6         no  WORD  Internal   ABS    486  private  text         3     0  -

clear_ram0                        00008087         no  LONG  Internal   ABS     27  private  text        10     0  -
clear_ram1                        00008091         no  LONG  Internal   ABS     39  private  text        10     0  -
clear_stack                       0000809B         no  LONG  Internal   ABS     50  private  text       117     0  -
clkBusPeripherial1                    8191         no  WORD  Internal   ABS    261  private  text         8     0  -
clkSetHsiDivider                      8199         no  WORD  Internal   ABS    270  private  text        13     0  -
clkSwitchToCrystal                    81A6         no  WORD  Internal   ABS    288  private  text        21     0  -
clkSetCpuDivider                      81BB         no  WORD  Internal   ABS    314  private  text        13     0  -
clockISR                              8213         no  WORD  Internal   ABS    403  private  text         5     0  -

hexToNibble                           8114         no  WORD  Internal   ABS    146  private  text        21     0  -

infinite_loop                     00008110         no  LONG  Internal   ABS    128  private  text         4     0  -

led_tst_off                           8224         no  WORD  Internal   ABS    411  private  text         4     0  -

main                              00008080         no  LONG  Internal   ABS     17  private  text         7     0  -

portA_ISR                             8218         no  WORD  Internal   ABS    407  private  text        12     0  -
pa_isr_end                            8228         no  WORD  Internal   ABS    413  private  text        26     0  -

ram0_start                              00         no  BYTE  Internal   ABS     24  private  text         0     0  -
ram0_end                                FF         no  BYTE  Internal   ABS     25  private  text         0     0  -
ram1_start                            0100         no  WORD  Internal   ABS     36  private  text         0     0  -
ram1_end                              01FF         no  WORD  Internal   ABS     37  private  text         0     0  -

stack_start                           0200         no  WORD  Internal   ABS     47  private  text         0     0  -
stack_end                             03FF         no  WORD  Internal   ABS     48  private  text         0     0  -

tim1OnePulsePwmCh3Setup               8144         no  WORD  Internal   ABS    197  private  text        77     0  -

u16test                               0000         no  WORD  Internal   ABS     12  private  undef        0     0  -
u16delayDuration                      0002         no  WORD  Internal   ABS     13  private  undef        0     0  -
uart1ReceiverSetup                    81C8         no  WORD  Internal   ABS    340  private  text        22     0  -
uartRxISR                             8243         no  WORD  Internal   ABS    432  private  text        29     0  -


36 labels
No errors on assembly of 'd:\stm8\ac_start\main.asm'